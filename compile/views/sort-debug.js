define("views/sort-debug",["ko-debug","$-debug","View-debug","iScroll-debug","views/localTourService-debug","/src/templates/sort-debug.html"],function(e){var i=e("ko-debug"),t=e("$-debug"),n=e("View-debug"),o=e("iScroll-debug"),s=e("views/localTourService-debug"),r=new s,a=new n({id:"view_sort",html:e("/src/templates/sort-debug.html"),isFirst:!0,afterRender:function(){if(this.isFirst){a.bindViewModel(l),this.isFirst=!1,l.requestDestination();var e=new o("#area_content",{scrollY:!0,scrollX:!1,scrollbars:!0,fadeScrollbars:!0,probeType:3,mouseWheel:!0,tap:!0,preventDefault:!0,keyBindings:!0}),i=new o("#category_content",{scrollY:!0,scrollX:!1,scrollbars:!0,fadeScrollbars:!0,probeType:3,mouseWheel:!0,tap:!0,preventDefault:!0,keyBindings:!0});l.category_content_scroll=i,l.area_content_scroll=e,this.viewModel.area_content_scroll&&(this.viewModel.area_content_scroll.refresh(),this.viewModel.area_content_scroll.scrollTo(0,0)),this.viewModel.category_content_scroll&&(this.viewModel.category_content_scroll.refresh(),this.viewModel.category_content_scroll.scrollTo(0,0))}}}),l=a.viewModel={area_content_scroll:null,category_content_scroll:null,baseAreaList:i.observableArray([]),areaList:i.observableArray([]),categoryList:i.observableArray([]),areaSelectList:i.observableArray([]),lastAreaSelectList:i.observableArray([]),lastAreaList:i.observableArray([]),LastDefaultDestination:i.observable({}),areaSelectSign:!1,areaSelectListMax:0,areaIsOpen:!1,categoryIsOpen:!1,defaultDestination:i.observable({name:"加载中..."}),defaultCategory:i.observable({name:"加载中..."}),area:function(){if(!l.areaIsOpen){l.areaIsOpen=!0,l.categoryIsOpen=!1,0==l.areaSelectList().length&&l.areaSelectList([l.defaultDestination()]),t("#area").find("span").removeClass("up"),t("#area").find("span").addClass("down"),t("#category").find("span").removeClass("down"),t("#category").find("span").addClass("up"),t("#sort_back").show(),t("#area_content").show(),t("#category_content").hide();for(var e,i=t("#area_content_ul").find("li"),n=l.areaList(),o=0;n.length>o;o++)if(l.defaultDestination().id==n[o].id){e=o;break}t(i[e]).addClass("sortSelect"),l.area_content_scroll.refresh(),l.area_content_scroll.scrollTo(0,0)}},category:function(){if(!l.categoryIsOpen){l.areaIsOpen=!1,l.categoryIsOpen=!0,t("#area").find("span").removeClass("down"),t("#area").find("span").addClass("up"),t("#category").find("span").removeClass("up"),t("#category").find("span").addClass("down"),t("#sort_back").show(),t("#category_content").show(),t("#area_content").hide();for(var e=t("#category_content_ul").find("li"),i=0;e.length>i;i++)l.defaultCategory().name==t(e[i]).text()&&t(e[i]).addClass("sortSelect");l.category_content_scroll.refresh(),l.category_content_scroll.scrollTo(0,0)}},requestDestination:function(){var e=function(){l.requestCategory();var e=arguments[0];l.defaultDestination(e[0]);var i={id:e[0].id,name:"全部",children:[]};e[0].children.unshift(i),l.areaList(e[0].children),l.baseAreaList(e),l.area_content_scroll.refresh();var t=mx_application.body.getViewById("view_main"),n=t.getViewById("view_localTourList"),o=n.getViewById("view_localTourList_content");o.viewModel.requestData.destId=l.defaultDestination().id,o.viewModel.itemList([]),o.viewModel.request(o.viewModel.requestData),l.copyBaseDate(),l.area_content_scroll.refresh(),l.area_content_scroll.scrollTo(0,0)},i=function(){console.log(arguments),l.area_content_scroll.refresh(),l.area_content_scroll.scrollTo(0,0)};r.destination(null,e,i)},requestCategory:function(){var e=function(){var e={children:[],id:null,name:"全部类型",pid:null,qizhouId:null},i=arguments[0];i.unshift(e),l.defaultCategory(i[0]),l.categoryList(i),l.category_content_scroll.refresh(),l.category_content_scroll.scrollTo(0,0)},i=function(){l.category_content_scroll.refresh(),l.category_content_scroll.scrollTo(0,0),console.log(arguments)};r.category(null,e,i)},areaClick:function(e,i){var n=l.areaSelectList();if(e.children.length>0){"全部"!=e.name&&n.push(e);var o=e.children;if(o[0].id!==e.id){var s={id:e.id,name:"全部",children:[]};o.unshift(s)}window.sleep(500),l.areaList(o),l.areaSelectListMax=n.length}t("#area").find("span").removeClass("up"),t("#area").find("span").addClass("down"),t("#area_content_ul").find("li").removeClass("sortSelect"),t(i.currentTarget).addClass("sortSelect");var r=mx_application.body.getViewById("view_main"),a=r.getViewById("view_localTourList"),d=a.getViewById("view_localTourList_content");if(l.areaSelectList(n),0==e.children.length){if(d.viewModel.requestData.destId=e.id,"全部"==e.name){var c={};t.extend(!0,c,l.areaSelectList()[l.areaSelectList().length-1]),c.name.length>7&&(c.name=c.name.substring(0,5)+"..."),l.defaultDestination(c)}else{var c={};t.extend(!0,c,e),c.name.length>7&&(c.name=c.name.substring(0,5)+"..."),l.defaultDestination(c)}l.copyBaseDate(),d.viewModel.itemList([]),d.viewModel.requestData.page.pageNo=1,d.viewModel.request(d.viewModel.requestData),l.hide_area_category_content()}l.area_content_scroll.refresh(),l.area_content_scroll.scrollTo(0,0)},categoryClick:function(e,i){l.defaultCategory(e),t(i.currentTarget).addClass("sortSelect"),t("#category").find("span").removeClass("up"),t("#category").find("span").addClass("down"),t("#category_content_ul").find("li").removeClass("sortSelect");var n=mx_application.body.getViewById("view_main"),o=n.getViewById("view_localTourList"),s=o.getViewById("view_localTourList_content");s.viewModel.requestData.cateId=e.id,s.viewModel.requestData.page.pageNo=1,s.viewModel.itemList([]),s.viewModel.request(s.viewModel.requestData),l.hide_area_category_content(),l.category_content_scroll.refresh(),l.category_content_scroll.scrollTo(0,0)},navClick:function(e){if(e.children.length>0){l.areaList(e.children);for(var i=l.areaSelectList(),t=[],n=0;i.length>n&&(t.push(i[n]),i[n].id!=e.id);n++);l.areaSelectList(t)}l.area_content_scroll.refresh(),l.area_content_scroll.scrollTo(0,0)},hide_area_category_content:function(){l.categoryIsOpen=!1,l.areaIsOpen=!1,t("#area_content").hide(),t("#category_content").hide(),t("#sort_back").hide(),t("#category").find("span").removeClass("down"),t("#category").find("span").addClass("up"),l.areaList(l.lastAreaList()),l.areaSelectList(l.lastAreaSelectList()),l.defaultDestination(l.LastDefaultDestination())},navAll:function(){l.areaSelectList([]),l.areaList(l.baseAreaList()),l.areaSelectSign=!0},copyBaseDate:function(){var e=[];t.extend(!0,e,l.areaList()),l.lastAreaList(e);var i=[];t.extend(!0,i,l.areaSelectList()),l.lastAreaSelectList(i);var n={};t.extend(!0,n,l.defaultDestination()),l.LastDefaultDestination(n)}};return a});